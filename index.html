<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Pick Lab</title>
  <link rel="manifest" href="assets/manifest.webmanifest">
  <link rel="icon" href="assets/icon.svg" type="image/svg+xml">
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
<header>
  <h1>Pick Lab</h1>
  <div class="sub">対戦・選出シミュレーター</div>
  <div class="toolbar">
    <button id="btnLoad" class="primary">図鑑データ読み込み</button>
    <button id="btnExport" disabled>保存（JSON）</button>
    <label class="btn" style="display:inline-flex;align-items:center;gap:8px;">
      読込（JSON）
      <input id="fileImport" type="file" accept="application/json" style="display:none"/>
    </label>
    <label class="btn" style="display:inline-flex;align-items:center;gap:8px;">
      覚える技で絞る
      <input id="toggleLearnset" type="checkbox"/>
    </label>

    <label class="btn" style="display:inline-flex;align-items:center;gap:8px;">
      通常ルール適用
      <input id="toggleNormalRules" type="checkbox" checked/>
    </label>

    <label class="btn" style="display:inline-flex;align-items:center;gap:8px;">
      伝説・準伝・幻を除外
      <input id="toggleNoLegends" type="checkbox" checked/>
    </label>

    <label class="btn" style="display:inline-flex;align-items:center;gap:8px;">
      レギュ適用
      <input id="toggleReg" type="checkbox"/>
    </label>

    <label class="btn" style="display:inline-flex;align-items:center;gap:8px;">
      レギュCSV読込
      <input id="fileRegCsv" type="file" accept=".csv,text/csv" style="display:none"/>
    </label>
    <button id="btnLoadRegDefault" class="btn" type="button">同梱レギュ読込</button>
    <span id="regInfo" class="small note" style="margin-left:6px;">レギュ: 未設定</span>
  </div>
  <div id="status" class="note" style="margin-top:8px"></div>
</header>

<main>
  <div class="kpi">
    <div class="card">
      <div class="panelTitle">
        <h2>簡易シミュ</h2>
        <div class="small">各チームから3体チェック → 計算</div>
      </div>
      <div class="row">
        <button id="btnSim" disabled>選出でシミュする</button>
        <button id="btnClearPicks" disabled>選出リセット</button>
        <button id="btnAutoLeft" disabled>左をおまかせ選出</button>
        <button id="btnAutoRight" disabled>右をおまかせ選出</button>
        <button id="btnAutoBoth" disabled>両方おまかせ</button>
        <label class="btn" style="display:inline-flex;align-items:center;gap:8px;">
          相手選出を隠す
          <input id="toggleHideRight" type="checkbox"/>
        </label>
        <div class="small">※本気の対戦エンジンではなく、タイプ＋技タイプ中心の“ざっくり”です。</div>
      </div>
      <div id="simOut" class="note"></div>
    </div>
  </div>

  <div class="grid" style="margin-top:14px">
    <section>
      <div class="panelTitle">
        <h2>あなた側</h2>
        <div class="small" id="leftHint"></div>
      </div>
      <div class="row">
        <button id="btnAutoTeamLeft" disabled>左をおまかせで6体</button>
        <button id="btnClearTeamLeft" disabled>左をクリア</button>
      </div>
      <div id="leftSlots" class="row" style="flex-direction:column"></div>
    </section>

    <section>
      <div class="panelTitle">
        <h2>相手側（おまかせ/AIの想定）</h2>
        <div class="small" id="rightHint"></div>
      </div>

      <div class="row">
        <button id="btnAutoTeamRight" disabled>右をおまかせで6体</button>
        <button id="btnClearTeamRight" disabled>右をクリア</button>
      </div>
      <div id="rightSlots" class="row" style="flex-direction:column"></div>
    </section>
  </div>

  <div class="hr"></div>
  <div class="note">
    うまく動かないときは、まず <span class="mono">/dex/ps/pokedex.json</span> にブラウザでアクセスできるか確認してください（404なら配置がズレています）。<br/>
    それでもダメなら、いま出てるエラー文をそのまま貼ってください。そこだけ潰します。
  </div>
</main>

<script src="app.js"></script>
</body>
</html>
